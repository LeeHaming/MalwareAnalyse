#coding:'utf-8'
#需要读取到opcodetrain.csv文件

import pandas as pd 
from sklearn import cross_validation
from sklearn.metrics import confusion_matrix
from sklearn import svm

trainSet=pd.read_csv('E:\MalwareAnalyse\smalis-opcode\opcode3grams-vector\opcodetrain.csv')
labels=trainSet.result

trainSet.drop("result",axis=1,inplace=True)
trainSet=trainSet.as_matrix()

X_train,X_test,y_train,y_test=cross_validation.train_test_split(
	trainSet,labels,test_size=0.4)

clf=svm.SVC(kernel='linear',C=1).fit(X_train,y_train)
print(clf.score(X_test,y_test))
#malware
#print(clf.predict('0000000010100100000000000100000000010010000000010000100001001000010010000100000010001000010100101001000000010000000010100100001000000011000000010000100000000000000000010100001000100001000001000100101000000001000111000100000000000000000000000000000100000000000010100100010000010010001000011000010100001110000000000000001000001000000000000010000'))
#predict
#fd=open("sampleOpFeature.txt")
#lines=fd.readlines()
#for line in lines:
#	oneApkInfo=[]
#	for i in range(1,344):
#		oneApkInfo.append(line.split()[i])
#	print(line.split()[0]+'\t'+clf.predict(oneApkInfo)+'\n')

#trainSet=pd.read_csv('opcodetrain.csv')