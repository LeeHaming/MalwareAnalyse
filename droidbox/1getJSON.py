#encoding: utf-8

#from collections import *
import os

path="H:\MalwareAnalyze\droidbox\des\\"
newJSON="H:\MalwareAnalyze\droidbox\desNew\\"
files=os.listdir(path)

for file in files:

	if file.endswith(".json") and file.startswith('b'):
		#print("hhhhhhhhhhhhhhhhhhhh")
		with open('H:/MalwareAnalyze/droidbox/des/'+file) as opFile:
			lines=opFile.readlines();
			#print("hhhhhhhhhhhhhhhhhhhh")
			newfile=open(newJSON+file.split('.')[0]+'new'+'.json','w+')
			#newfile=open(file.split('.')[0]+'new'+'.json','w+')
			i=0
			loc=0
			str=''
			for line in lines:
				#print("i========",i)
				i+=1
				#print(line)
				if line.startswith('{'):
					loc=i
					#print("ooooooooooooooo")
					if line.endswith('}}\n'):
						str+=line
						break
					str+=line[:-26]
					#newfile.write(line)
				if i>loc and line.endswith('}\n'):
					#print("ooooooooooooooo")
					#newfile.write(line)
					#str+='\n'
					str+=line
			newfile.write(str)


	if file.endswith(".json") and file.startswith('m'):
		#print("hhhhhhhhhhhhhhhhhhhh")
		with open('H:/MalwareAnalyze/droidbox/des/'+file) as opFile:
			lines=opFile.readlines();
			#print("hhhhhhhhhhhhhhhhhhhh")
			newfile=open(newJSON+file.split('.')[0]+'new'+'.json','w+')
			#newfile=open(file.split('.')[0]+'new'+'.json','w+')
			i=0
			loc=0
			str=''
			for line in lines:
				#print("i========",i)
				i+=1
				#print(line)
				if line.startswith('{'):
					loc=i
					#print("ooooooooooooooo")
					if line.endswith('}}\n'):
						str+=line
						break
					str+=line[:-83]
					#str+=line
					#newfile.write(line)
				if i>loc and line.endswith('}\n'):
					#print("ooooooooooooooo")
					#newfile.write(line)
					#str+='\n'
					str+=line
			newfile.write(str)

	if file.endswith(".json") and file.startswith('m3') and len(file)==10:
		with open('H:/MalwareAnalyze/droidbox/des/'+file) as opFile:
			lines=opFile.readlines();
			#print("hhhhhhhhhhhhhhhhhhhh")
			newfile=open(newJSON+file.split('.')[0]+'new'+'.json','w+')
			#newfile=open(file.split('.')[0]+'new'+'.json','w+')
			i=0
			loc=0
			str=''
			for line in lines:
				#print("i========",i)
				i+=1
				#print(line)
				if line.startswith('{'):
					loc=i
					#print("ooooooooooooooo")
					if line.endswith('}}\n'):
						str+=line
						break
					str+=line[:-26]
					#newfile.write(line)
				if i>loc and line.endswith('}\n'):
					#print("ooooooooooooooo")
					#newfile.write(line)
					#str+='\n'
					str+=line
			newfile.write(str)
	#print(file)

print("all work done")