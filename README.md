# MalwareAnalyse
Classify APKs into benign or malware based DL with scikit-learn.

## Project Description
毕业设计：基于深度学习中SVM传统模型，对8000+样本(2300benign+5700malware)进行恶意分类；实现了将深度学习工具利用与恶意分析的实际应用中。项目运行过程中一定要注意文件目录的对应，如有代码问题或运行问题，希望可以告知本人。

## File Description
- APK:
所有的样本APK

- droidbox:
des:获取到的所有的APK样本DroidBox运行数据
desNew:对原始数据预处理之后的集合
0droidbox:是DroidBox中的主要代码,本人在其中增加内容使得收集一个apk样本信息之后可以自动卸载该APK
0getDroidboxData:开辟子进程运行DroidBox,同时获取DroidBox系统返回的进程信息；实现获取大批量APK动态信息的功能
0monkeyRemove:自定义实现在DroidBox收集完一个APK动态信息之后自动卸载该APK,优化性能
1getJSON:用于从DroidBox得到的raw数据中提取需要的json数据
2json_getCode:将json信息与字典映射后生成特征向量
3json_txtTocsv:将txt向量格式转化为csv文件
4json_getModel:训练模型并检测
DroidBoxCode.txt:生成的所有样本的向量集合--文本格式
train.csv:生成样本的向量集合---csv格式

- getAPKs:
用于获取APK并整理为可用的格式
getBenignAPK：从360网站上爬取良性APK的代码
mdToAPK：将批量恶意APK的非.apk形式的压缩文件转成.apk
sortAPK：将malware与benign中所有的APK编号

- KEY-INFO
一些关键代码+关键截图等

- permission：
PermFiles:存储从所有APK的manifest文件中提取到的permission信息
1getPermission:从.apk格式文件提取permission的脚本代码
2generateCode:将所有APK的permission信息抽象为01代码向量
3txtTocsv:将01向量的文本文件转化为csv格式
4getModel:利用生成的csv文件训练并测试模型
allPermission:Android中所有的permission,共147,用来生成权限字典
fileCode:所有APK的permission特征向量集合的txt格式文件
train:内容与fileCode相同;只是为.csv格式

- questions:
记录遇到的一些问题

- smali-opcode
dest:所有APK的dex文件集合
opcode3grams-vector:存放opcode3grams特征向量集合的txt和csv格式文件
opcodes:存放所有APK生成的opcode序列文件（由于内存容量原因，暂为空）
smalis:存放所有APK的smali文件
1getDex:从.apk格式文件获取dex文件
2dex2smali:从.dex文件获取APK的全部smalis
3getAllSmaliOpcodes:遍历APK的smali文件并生成opcode序列
4get3gramsVector:根据生成的opcode序列得到APK的opcode3grams特征向量
5opcode_txtTocsv:将.txt文件转换为.csv文件
6opcode_getModel:根据.csv文件训练并检测模型
